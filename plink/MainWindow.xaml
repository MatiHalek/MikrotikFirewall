<ui:FluentWindow x:Class="plink.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:plink"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        mc:Ignorable="d" MinWidth="400" Width="400" Height="600" MinHeight="400"
        Title="Mikrotik Firewall" WindowStartupLocation="CenterScreen" WindowBackdropType="Acrylic" ExtendsContentIntoTitleBar="True" Background="Transparent" Icon="Assets/logo.ico">
    <WindowChrome.WindowChrome>
        <WindowChrome GlassFrameThickness="1" CornerRadius="10" CaptionHeight="0" UseAeroCaptionButtons="False" ResizeBorderThickness="5"/>
    </WindowChrome.WindowChrome>
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#A7204BB1" Offset="0"/>
                <GradientStop Color="#A10F172A" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ui:TitleBar
            Title="Mikrotik Firewall">
            <ui:TitleBar.Icon>
                <ui:ImageIcon>
                    <ui:ImageIcon.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1.5" ScaleY="1.5"/>
                            <TranslateTransform Y="-5"/>
                        </TransformGroup>
                    </ui:ImageIcon.RenderTransform>
                    <ui:ImageIcon.Source>
                        <BitmapImage UriSource="pack://application:,,,/Assets/logo.png"/>
                    </ui:ImageIcon.Source>
                </ui:ImageIcon>
            </ui:TitleBar.Icon>
        </ui:TitleBar>
        <ScrollViewer Grid.Row="1" x:Name="ScrollViewer" VerticalScrollBarVisibility="Auto">
            <ui:Card Background="#CF354d87"  VerticalAlignment="Center"  Margin="10, 0, 10, 0" Padding="30" MaxWidth="1200" Cursor="">
                <StackPanel VerticalAlignment="Top">
                    <ui:TextBlock Text="Login do routera" Margin="0, 5" FontWeight="SemiBold"/>
                    <!-- W linii poniżej zmień właściwość Text, aby zmienić domyślny login -->
                    <ui:TextBox Name="LoginTextBox" Margin="0, 0, 0, 8" Text=""/>
                    <ui:TextBlock Text="Hasło do routera" Margin="0, 5" FontWeight="SemiBold"/>
                    <!-- W linii poniżej zmień właściwość Password, aby zmienić domyślne hasło -->
                    <ui:PasswordBox Name="PasswordBox" Margin="0, 0, 0, 8" Password=""/>
                    <ui:TextBlock Text="Adresy do przepuszczenia" Margin="0, 5" FontWeight="SemiBold"/>
                    <!-- W linii poniżej zmień właściwość Text, aby zmienić domyślny adres dodawany jako pierwszy do listy.
                    Aby dodać adresy, które już w momencie uruchomienia programu powinny znajdować się na liście, przejdź na górę pliku MainWindow.xaml.cs i postępuj zgodnie z instrukcjami. -->
                    <ui:TextBox Name="UrlTextBox" Margin="0, 0, 0, 8" Text=""/>
                    <ui:Button Click="Button_Click" Appearance="Info" FontWeight="SemiBold"  Cursor="Hand" IsDefault="True">
                        <ui:Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <ui:FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xecc8;"/>
                                <TextBlock Text="Dodaj" Margin="5, 0, 0, 1"/>
                            </StackPanel>
                        </ui:Button.Content>
                        <ui:Button.Style>
                            <Style TargetType="ui:Button" BasedOn="{StaticResource {x:Type ui:Button}}">
                                <Style.Triggers>
                                    <Trigger Property="IsDefaulted" Value="True">
                                        <Setter Property="BorderThickness" Value="2"/>
                                        <Setter Property="BorderBrush" Value="#99FFFFFF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ui:Button.Style>
                    </ui:Button>
                    <ListBox x:Name="UrlListBox" MaxHeight="460" Margin="0, 5">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Height="20">
                                    <StackPanel.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Usuń" Click="MenuItemRemove_Click">
                                                <MenuItem.Icon>
                                                    <ui:FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE74D;"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                        </ContextMenu>
                                    </StackPanel.ContextMenu>
                                    <StackPanel Orientation="Horizontal">
                                        <ui:FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE774;"/>
                                        <TextBlock Text="{Binding .}" Margin="5, 0, 0, 1"/>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <StackPanel Orientation="Horizontal" Margin="0,25,0,0" HorizontalAlignment="Right">
                        <ui:Button x:Name="ApplyButton" Content="WYKONAJ" Appearance="Success" Click="SetFirewallRule" Width="100" Margin="0, 0, 15, 0" FontWeight="Bold" Padding="15, 10" Cursor="Hand"/>
                        <ui:Button x:Name="ClearButton" Content="CZYŚĆ" Appearance="Danger" FontWeight="Bold" Width="100" Padding="15, 10" Click="ClearFirewallRule" Cursor="Hand"/>
                    </StackPanel>
                    <StackPanel>
                        <ui:TextBlock Name="SuccessResultTextBlock" Foreground="LightGreen" FontSize="15" FontWeight="Bold" HorizontalAlignment="Center" TextWrapping="Wrap" Margin="0, 15, 0, -15" Visibility="Collapsed"/>
                        <ui:TextBlock Name="FailedResultTextBlock" Foreground="PaleVioletRed"  FontSize="15" FontWeight="Bold" HorizontalAlignment="Center" TextWrapping="Wrap" Margin="0, 15, 0, -15" Visibility="Collapsed"/>
                        <Grid x:Name="ProgressResultGrid" Margin="0, 15, 0, -15" Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="3*"/>
                                <ColumnDefinition Width="2*"/>
                            </Grid.ColumnDefinitions>
                            <ui:TextBlock Name="ProgressResultTextBlock" Foreground="LightBlue" FontSize="15" FontWeight="Bold" TextWrapping="Wrap" />
                            <ProgressBar Grid.Column="1" Height="7" IsIndeterminate="True" Value="10" Maximum="100" Minimum="0"/>
                        </Grid>
                    </StackPanel>
                    <Button HorizontalAlignment="Right" Click="ShowLogFile" Cursor="Hand" Width="40" Height="30">
                        <Button.RenderTransform>
                            <TranslateTransform Y="25" X="25"/>
                        </Button.RenderTransform>
                        <Button.Content>
                            <ui:FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE729;" FontSize="15"/>
                        </Button.Content>
                        <Button.ToolTip>Otwórz dziennik</Button.ToolTip>
                    </Button>
                </StackPanel>
            </ui:Card>
        </ScrollViewer>
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="© 2025 MH Corp. | Created by Vistaaa" Padding="5" FontWeight="SemiBold" FontSize="12"/>
                <TextBlock VerticalAlignment="Center">
                    <Hyperlink Foreground="Orange"  NavigateUri="https://github.com/MatiHalek" RequestNavigate="Hyperlink_RequestNavigate" FontSize="12">
                        GitHub
                    </Hyperlink>
                </TextBlock>
            </StackPanel>
            <TextBlock Text="v1.0.0 (2025-04-10)" Padding="5" FontWeight="SemiBold" FontSize="12" Grid.Column="1"/>
        </Grid>
    </Grid>
</ui:FluentWindow>
